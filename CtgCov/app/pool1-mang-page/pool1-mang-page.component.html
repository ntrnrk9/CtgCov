<div class="page-container">
    <div class="col-md-12 page-heading"><b>Pool Variance Dashboard</b></div><br />
    <div class="page-body">
        <div class="row">
            <div class="col-md-12">
                <div style="background: #d1deef;padding:5px;height:40px">
                    <!--<input class="ctg-textbox pull-left" placeholder="Search by state" [(ngModel)]="stateFil" /><span class="pull-left glyphicon glyphicon-search serch-gly"></span>-->
                    <!--<input class="ctg-textbox pull-left" placeholder="Search by city" [(ngModel)]="cityFil" style="margin-left:10px;" /><span class="pull-left glyphicon glyphicon-search serch-gly"></span>-->
                    <!--<input class="ctg-textbox pull-left" placeholder="Company/Customer" [(ngModel)]="ccFil" style="margin-left:10px;" /><span class="pull-left glyphicon glyphicon-search serch-gly"></span>-->

                    <div class="dropdown pull-left pm-select-cont">
                        <input class="filters dropdown-toggle" type="button" data-toggle="dropdown" value="Search by state" />
                        <span class="caret"></span>
                        <div class="dropdown-menu no-padding mulSel-dd">
                            <div class="input-group">
                                <input type="text" class="form-control search-box" placeholder="Search" [(ngModel)]="stateFil">
                                <div class="input-group-btn">
                                    <button class="btn btn-default search-box" type="submit">
                                        <i class="glyphicon glyphicon-search"></i>
                                    </button>
                                </div>
                            </div>

                            <ul class="mulSel-dd-ul">
                                <li><a class="pull-left" href="#">Select All</a><a class="pull-right" href="#">Clear All</a></li>
                                <!--<li *ngFor="let item of countryList| filterArray:stateFil"><input type="checkbox" value=""/>{{item}}</li>-->
                                <li *ngFor="let item of allStates|filterC:stateFil:'stateCode'"><input type="checkbox" value="" />{{item.stateCode}}</li>
                            </ul>
                            <div class="div-center">
                                <input type="button" class="btn btn-default" value="Apply" (click)="filterByState()"/>
                            </div>
                        </div>
                    </div>
                    <div class="dropdown pull-left pm-select-cont" style="margin-left:10px;">
                        <input class="filters dropdown-toggle" type="button" data-toggle="dropdown" value="Search by city" />
                        <span class="caret"></span>
                        <div class="dropdown-menu no-padding mulSel-dd">

                            <div class="input-group">
                                <input type="text" class="form-control search-box" placeholder="Search" [(ngModel)]="cityFil">
                                <div class="input-group-btn">
                                    <button class="btn btn-default search-box" type="submit">
                                        <i class="glyphicon glyphicon-search"></i>
                                    </button>
                                </div>
                            </div>
                            <ul class="mulSel-dd-ul">
                                <li><a class="pull-left" href="#">Select All</a><a class="pull-right" href="#">Clear All</a></li>
                                <!--<li *ngFor="let item of cityList| filterArray:cityFil"><input type="checkbox" value="" />{{item}}</li>-->
                                <li *ngFor="let item of allCities|filterC:cityFil:'cityName'"><input type="checkbox" value="" />{{item.cityName}}</li>
                            </ul>
                            <div class="div-center">
                                <input type="button" class="btn btn-default" value="Apply" />
                            </div>
                        </div>
                    </div>
                    <div class="dropdown pull-left pm-select-cont" style="margin-left:10px;">
                        <input class="filters dropdown-toggle" type="button" data-toggle="dropdown" value="Company/Customer" />
                        <span class="caret"></span>
                        <div class="dropdown-menu no-padding mulSel-dd">

                            <div class="input-group">
                                <input type="text" class="form-control search-box" placeholder="Search" [(ngModel)]="ccFil">
                                <div class="input-group-btn">
                                    <button class="btn btn-default search-box" type="submit">
                                        <i class="glyphicon glyphicon-search"></i>
                                    </button>
                                </div>
                            </div>
                            <ul class="mulSel-dd-ul">
                                <li><a class="pull-left" href="#">Select All</a><a class="pull-right" href="#">Clear All</a></li>
                                <!--<li *ngFor="let item of ccList| filterArray:ccFil"><input type="checkbox" value="" />{{item}}</li>-->
                                <li *ngFor="let item of allCC|filterC:ccFil:'companyName'"><input type="checkbox" value="" />{{item.companyName}}</li>
                            </ul>
                            <div class="div-center">
                                <input type="button" class="btn btn-default" value="Apply" />
                            </div>
                        </div>
                    </div>
                    <select class="form-control pull-left pm-select" id="sel1" [ngModel]="selectedVarience" (ngModelChange)="selectVarience($event)">
                        <option value=1>Pools having variance</option>
                        <option value=0>Pools having no variance</option>
                        <option value=-1>All pools</option>
                    </select>
                    <button type="button" class="pm-addBut pull-right" data-toggle="modal" data-target="#addModal">Add <span class="pull-right glyphicon glyphicon-plus pm-add-plus"></span></button>
                    <!--<button type="button" class="btn btn-info btn-lg"  data-toggle="modal" data-target="#myModal">Open Modal</button>-->
                </div>
            </div>
            <div class="col-md-12">
                <div style="background: white;">
                    <h5 style="padding:15px;margin:0px;font-weight:bold">Pool List</h5>
                </div>
            </div>
            <div class="col-md-12">
                <table class="app-table table table-striped table-hover table-bordered1">
                    <thead>
                        <tr bgcolor="#f7f8fc" class="app-table-tr">
                            <th style="text-align:center" *ngFor="let con of ob.column">{{con}}</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!--<tr *ngFor="let item of ob.groups">
                            <td>{{row.state}}</td>
                            <td>{{row.city}}</td>
                        </tr>-->
                        <!--<tr *ngFor="let item of data| filterC:cityFil:'city'| filterC:stateFil:'state'| filterC:ccFil:'company'">
                        -->
                        <ng-container *ngFor="let i=index;let item of data">
                            <tr *ngIf="i>=lLimit && i<uLimit">
                                <td style="text-align:center">
                                    <span>{{item.state}}</span>
                                </td>
                                <td style="text-align:center">
                                    <span>{{item.city}}</span>
                                </td>
                                <td style="text-align:center">
                                    <span>{{item.twm}}</span>
                                </td>
                                <td style="text-align:center">
                                    <span>{{item.company}}</span>
                                </td>
                                <td style="text-align:center">
                                    <span>{{item.csr}}</span>
                                </td>
                                <td style="text-align:center">
                                    <span>{{item.planner}}</span>
                                </td>

                                <td style="text-align:center">
                                    <span>{{item.reqPool}}</span>
                                </td>

                                <td style="text-align:center">
                                    <span>{{item.curr}}</span>
                                </td>
                                <td style="text-align:center">
                                    <span>{{item.variance}}</span>
                                </td>
                                <td style="text-align:center">
                                    <button type="button" class="action" data-toggle="modal" data-target="#editModal" (click)="toEdit(i)"><span class="glyphicon glyphicon-edit"></span></button>

                                    <button class="action"><span class="glyphicon glyphicon-play"></span></button>
                                </td>
                            </tr>
                        </ng-container>
                    </tbody>
                </table>
                <div style="text-align:center"><a *ngIf="lLimit!=0" (click)="prevPage()">Previous</a><a style="padding:0px 30px 0px 30px;color:black">{{pageNumber+1}}</a><a (click)="nextPage()" *ngIf="uLimit!=data.length">Next</a></div>
            </div>
            <!-- Trigger the modal with a button -->
            <!-- Modal -->
            <div id="addModal" class="modal fade" role="dialog">
                <div class="modal-dialog">

                    <!-- Modal content-->
                    <div class="modal-content" style="border-radius:0px">
                        <div class="modal-header page-heading">
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                            <h4 class="modal-title">Add Pool</h4>
                        </div>
                        <div class="modal-body">
                            <div class="modal-div">
                                <div class="row pu-row">
                                    <div>
                                        <label>Company Name</label><br>
                                        <div class="dropdown pull-left pm-select-cont">
                                            <button class="filters dropdown-toggle" type="button" data-toggle="dropdown">
                                                {{selectedCompany}}
                                                <span class="caret"></span>
                                            </button>
                                            <div class="dropdown-menu no-padding mulSel-dd">
                                                <div class="input-group">
                                                    <input type="text" class="form-control search-box" placeholder="Search" [(ngModel)]="ccFil">
                                                    <div class="input-group-btn">
                                                        <button class="btn btn-default search-box" type="submit">
                                                            <i class="glyphicon glyphicon-search"></i>
                                                        </button>
                                                    </div>
                                                </div>
                                                <ul class="mulSel-dd-ul">
                                                    <li *ngFor="let item of allCC|filterC:ccFil:'companyName'" (click)="selectCompany(item.companyName)">{{item.companyName}}</li>
                                                </ul>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                                <div class="row pu-row">
                                    <div class="col-md-6 orPad">
                                        <label>State</label><br />
                                        <input class="no-padding col-md-12" readonly placeholder={{selectedState}} />
                                    </div>
                                    <div class="col-md-6 olPad">
                                        <label>City</label><br />
                                        <input class="no-padding col-md-12" readonly placeholder={{selectedCity}} />
                                    </div>
                                </div>
                                <div class="row pu-row">
                                    <div class="col-md-6 orPad">
                                        <label>Csr</label><br />
                                        <searchfilter [items]="allCsr" [(selectedItem)]="selectedCsr" [key]="'csrName'"></searchfilter>
                                    </div><div class="col-md-6 olPad">
                                        <label>Planner</label><br />
                                        <searchfilter [items]="allPlanner" [(selectedItem)]="selectedPlanner" [key]="'plannerName'"></searchfilter>
                                    </div>
                                </div><div class="row pu-row">
                                    <div>
                                        <label>Required</label><br>
                                        <input class="no-padding col-md-12" />
                                    </div>
                                </div>
                                <!--<div class="row pu-row">
                                    <div class="col-md-6 orPad">
                                        <label>Trailer Type</label><br />
                                        <input class="no-padding col-md-12" />
                                    </div><div class="col-md-6 olPad">
                                        <label>Required</label><br />
                                        <input class="no-padding col-md-12" />
                                    </div><button class="pull-right add-trType"><span class="glyphicon glyphicon-plus-sign blue-but"></span></button>
                                </div>-->
                            </div>
                        </div>
                        <div class="modal-footer page-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                            <button type="button" class="btn btn-success" data-dismiss="modal" (click)="add()">Save</button>
                        </div>
                    </div>

                </div>
            </div>
            <div id="editModal" class="modal fade" role="dialog">
                <div class="modal-dialog">

                    <!-- Modal content-->
                    <div class="modal-content" style="border-radius:0px">
                        <div class="modal-header page-heading">
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                            <h4 class="modal-title">Update Pool</h4>
                        </div>
                        <div class="modal-body">
                            <div class="modal-div">
                                <div>
                                    <label>Pool # :</label>
                                    <label>{{poolToEdit.pool}}</label><br>
                                    <label>Company Name :</label>
                                    <label>{{poolToEdit.company}}</label><br>
                                    <label>State :</label>
                                    <label>{{poolToEdit.state}}, </label>
                                    <label>City :</label>
                                    <label>{{poolToEdit.city}}</label>
                                </div>
                                <div class="row pu-row">
                                    <div class="col-md-6 orPad">
                                        <label>Csr</label><br />
                                        <div class="dropdown pull-left pm-select-cont" style="margin-left:10px;">
                                            <input class="filters dropdown-toggle" type="button" data-toggle="dropdown" value={{selectedCsr}} />
                                            <span class="caret"></span>
                                            <div class="dropdown-menu no-padding mulSel-dd">
                                                <div class="input-group">
                                                    <input type="text" class="form-control search-box" placeholder="Search" [(ngModel)]="csrFil">
                                                    <div class="input-group-btn">
                                                        <button class="btn btn-default search-box" type="submit">
                                                            <i class="glyphicon glyphicon-search"></i>
                                                        </button>
                                                    </div>
                                                </div>
                                                <ul class="mulSel-dd-ul">
                                                    <li *ngFor="let item of allCsr|filterC:csrFil:'csrName'" (click)="selectCsr(item.csrName)">{{item.csrName}}</li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div><div class="col-md-6 olPad">
                                        <label>Planner</label><br />
                                        <div class="dropdown pull-left pm-select-cont" style="margin-left:10px;">
                                            <button class="filters dropdown-toggle" type="button" data-toggle="dropdown">
                                                {{selectedPlanner}}
                                                <span class="caret"></span>
                                            </button>
                                            <div class="dropdown-menu no-padding mulSel-dd">
                                                <div class="input-group">
                                                    <input type="text" class="form-control search-box" placeholder="Search" [(ngModel)]="plannerFil">
                                                    <div class="input-group-btn">
                                                        <button class="btn btn-default search-box" type="submit">
                                                            <i class="glyphicon glyphicon-search"></i>
                                                        </button>
                                                    </div>
                                                </div>
                                                <ul class="mulSel-dd-ul">
                                                    <li *ngFor="let item of allPlanners|filterC:plannerFil:'plannerName'" (click)="selectPlanner(item.plannerName)">{{item.plannerName}}</li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row pu-row">
                                    <!--<div class="col-md-6 orPad">
                                        <label>Trailer Type</label><br />
                                        <input class="no-padding col-md-12" />
                                    </div>-->
                                    <div class="col-md-6 olPad">
                                        <label>Required Pool</label><br />
                                        <input class="no-padding col-md-12" [(ngModel)]="updateReqPool" />
                                    </div>
                                    <!--<button class="pull-right add-trType"><span class="glyphicon glyphicon-plus-sign blue-but"></span></button>-->
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer page-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                            <button type="button" class="btn btn-success" data-dismiss="modal" (click)="updatePool()">Save</button>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>